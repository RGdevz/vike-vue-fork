{"version":3,"file":"+config.js","sources":["../src/utils/tsx-workaround.ts","../src/integration/ssrEffect.ts","../src/+config.ts"],"sourcesContent":["// This is a workaround for\n// * https://github.com/esbuild-kit/tsx/issues/113\n// * https://github.com/vuejs/core/issues/8303\n// Without this, when running vike-vue with tsx (for example when scaffolding a\n// Vue+Express project with Bati), querying the server will fail with the\n// following error:\n//     [vike][request(1)] HTTP request: /\n//     [vite][request(1)] __name is not defined\n//     [vite][request(1)] __name is not defined\n//     [vite][request(1)] __name is not defined\n//     [vite][request(1)] Error when evaluating SSR module virtual:vike:importPageCode:server:/pages/index: failed to import \"/pages/index/+Page.vue\"\n//     |- ReferenceError: __name is not defined\nconst globalName = (target: Object, value: string) =>\n  Object.defineProperty(target, 'name', {\n    value,\n    configurable: true,\n  })\n;(globalThis as any).__name = globalName\n","export { ssrEffect }\n\nimport type { ConfigEffect } from 'vike/types'\n\nfunction ssrEffect({ configDefinedAt, configValue }: Parameters<ConfigEffect>[0]): ReturnType<ConfigEffect> {\n  if (typeof configValue !== 'boolean') throw new Error(`${configDefinedAt} should be a boolean`)\n  const env = {\n    // Always load on the client-side.\n    client: true,\n    // When the SSR flag is false, we want to render the page only on the client-side.\n    // We achieve this by loading `Page` only on the client-side: when onRenderHtml()\n    // gets a `Page` value that is undefined it skip server-side rendering.\n    server: configValue !== false,\n  }\n  return {\n    meta: {\n      Page: { env },\n    },\n  }\n}\n","export { config as default }\n\nimport type { Config } from 'vike/types'\nimport './utils/tsx-workaround.js'\nimport { ssrEffect } from './integration/ssrEffect.js'\n\nconst config = {\n  name: 'vike-vue',\n  require: {\n    vike: '>=0.4.191',\n  },\n\n  // https://vike.dev/onRenderHtml\n  onRenderHtml: 'import:vike-vue/__internal/integration/onRenderHtml:onRenderHtml',\n  // https://vike.dev/onRenderClient\n  onRenderClient: 'import:vike-vue/__internal/integration/onRenderClient:onRenderClient',\n\n  // https://vike.dev/passToClient\n  // It is a cumulative config option, so a web app using vike-vue can extend\n  // this list.\n  passToClient: ['fromHtmlRenderer', '_configFromHook'],\n\n  // https://vike.dev/clientRouting\n  clientRouting: true,\n  hydrationCanBeAborted: true,\n  // https://vike.dev/meta\n  meta: {\n    Head: {\n      env: { server: true },\n      cumulative: true,\n    },\n    Layout: {\n      env: { server: true, client: true },\n      cumulative: true,\n    },\n    title: {\n      env: { server: true, client: true },\n    },\n    description: {\n      env: { server: true },\n    },\n    image: {\n      env: { server: true },\n    },\n    viewport: {\n      env: { server: true },\n    },\n    favicon: {\n      env: { server: true },\n      global: true,\n    },\n    lang: {\n      env: { server: true, client: true },\n    },\n    ssr: {\n      env: { config: true },\n      effect: ssrEffect,\n    },\n    stream: {\n      env: { server: true },\n    },\n    onCreateApp: {\n      env: { server: true, client: true },\n      cumulative: true,\n    },\n    onBeforeRenderHtml: {\n      env: { server: true },\n      cumulative: true,\n    },\n    onAfterRenderHtml: {\n      env: { server: true },\n      cumulative: true,\n    },\n    onBeforeRenderClient: {\n      env: { server: false, client: true },\n      cumulative: true,\n    },\n    onAfterRenderClient: {\n      env: { server: false, client: true },\n      cumulative: true,\n    },\n    bodyHtmlBegin: {\n      env: { server: true },\n      cumulative: true,\n      global: true,\n    },\n    bodyHtmlEnd: {\n      env: { server: true },\n      cumulative: true,\n      global: true,\n    },\n    htmlAttributes: {\n      env: { server: true },\n      global: true,\n      cumulative: true, // for Vike extensions\n    },\n    bodyAttributes: {\n      env: { server: true },\n      global: true,\n      cumulative: true, // for Vike extensions\n    },\n  },\n} satisfies Config\n\n/* Doesn't work: rollup removes these imports\nimport './types/Config.js'\nimport './types/PageContext.js'\n*/\n// Trick to ensure Rollup doesn't remove the imports\nexport type { __FakeExport_Config } from './types/Config.js'\nexport type { __FakeExport_PageContext } from './types/PageContext.js'\n"],"names":[],"mappings":"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"}